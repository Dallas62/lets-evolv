{"version":3,"sources":["../../test/Layer.test.js"],"names":["testCase","require","Layer","module","exports","test","layer","weights","equal","inputs","outputs","length","deepEqual","feedForward","done","Array","fill","throws","and_or","not","XOR","result"],"mappings":"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","file":"Layer.test.js","sourcesContent":["'use strict';\n\nlet testCase  = require('nodeunit').testCase;\n\nlet Layer = require(\"../src/Layer\");\n\nmodule.exports = testCase({\n    'Layer - Instantiation one output': function (test) {\n        // Instantiation\n        let layer = new Layer(2, 1);\n\n        let weights = [0.2, 0.3, 0.4];\n\n        layer.weights = weights;\n\n        test.equal(layer.inputs,  2);\n        test.equal(layer.outputs, 1);\n\n        test.equal(layer.weights.length, 3);\n        test.deepEqual(layer.weights, weights);\n\n        test.equal(layer.feedForward([1, 1]).length, 1);\n\n        test.done();\n    },\n    'Layer - Instantiation 5 outputs': function (test) {\n        // Instantiation\n        let layer = new Layer(10, 5);\n\n        let weights = new Array(55).fill(0.25);\n\n        layer.weights = weights;\n\n        test.equal(layer.inputs,  10);\n        test.equal(layer.outputs, 5);\n\n        test.equal(layer.weights.length, 55);\n        test.deepEqual(layer.weights, weights);\n\n        test.equal(layer.feedForward(new Array(10)).length, 5);\n\n        test.done();\n    },\n    'Layer - Instantiation wrong parameter inputs': function (test) {\n        // Instantiation\n        test.throws(function() {\n            new Layer(0, 1);\n        });\n        test.done();\n    },\n    'Layer - Instantiation wrong parameter outputs': function (test) {\n        // Instantiation\n        test.throws(function() {\n            new Layer(1, 0);\n        });\n        test.done();\n    },\n    'Layer - Instantiation wrong parameter activation': function (test) {\n        // Instantiation\n        test.throws(function() {\n            new Layer(2, 1, null);\n        });\n        test.done();\n    },\n    'Layer - OR logic gate': function (test) {\n        // Instantiation\n        let layer = new Layer(2, 1);\n\n        layer.weights = [0.5, 0.5, -0.5]; // 2 inputs, 1 bias\n\n        test.deepEqual(layer.feedForward([0, 0]), [0]);\n        test.deepEqual(layer.feedForward([0, 1]), [1]);\n        test.deepEqual(layer.feedForward([1, 0]), [1]);\n        test.deepEqual(layer.feedForward([1, 1]), [1]);\n\n        test.done();\n    },\n    'Layer - AND logic gate': function (test) {\n        // Instantiation\n        let layer = new Layer(2, 1);\n\n        layer.weights = [0.3, 0.3, -0.5]; // 2 inputs, 1 bias\n\n        test.deepEqual(layer.feedForward([0, 0]), [0]);\n        test.deepEqual(layer.feedForward([0, 1]), [0]);\n        test.deepEqual(layer.feedForward([1, 0]), [0]);\n        test.deepEqual(layer.feedForward([1, 1]), [1]);\n\n        test.done();\n    },\n    'Layer - NOT logic gate': function (test) {\n        // Instantiation\n        let layer = new Layer(1, 1);\n\n        layer.weights = [-2, 1]; // 1 input, 1 bias\n\n        test.deepEqual(layer.feedForward([0]), [1]);\n        test.deepEqual(layer.feedForward([1]), [0]);\n\n        test.done();\n    },\n    'Layer - NOT logic gate for XOR': function (test) {\n        // Instantiation\n        let layer = new Layer(2, 1);\n\n        layer.weights = [-2, 1, -0.1]; // 2 inputs, 1 bias\n\n        test.deepEqual(layer.feedForward([0, 0]), [0]);\n        test.deepEqual(layer.feedForward([0, 1]), [1]);\n        test.deepEqual(layer.feedForward([1, 1]), [0]);\n\n        test.done();\n    },\n    'Layer - XOR logic gate using 2 layers': function (test) {\n        // Instantiation\n        let and_or  = new Layer(2, 2);\n        let not = new Layer(2, 1);\n\n        and_or.weights  = [0.3, 0.3, -0.5, 0.5, 0.5, -0.5];\n        not.weights = [ -2, 1, -0.1];\n\n        // Create the XOR function\n        let XOR = function(inputs) {\n\n            let result = and_or.feedForward(inputs);\n\n            return not.feedForward(result);\n        };\n\n        test.deepEqual(XOR([0, 0]), [0]);\n        test.deepEqual(XOR([0, 1]), [1]);\n        test.deepEqual(XOR([1, 0]), [1]);\n        test.deepEqual(XOR([1, 1]), [0]);\n\n        test.done();\n    }\n});"]}